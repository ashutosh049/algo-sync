package com.scalar.classroom.day21_mathss_basics;

import com.util.Util;

public class FindTotalPairWithSumDivisibleByK {

  public static void main(String[] args) {

    int expected = 0;
    int[] A = new int[]{93, 9, 46, 79, 56, 24, 10, 26, 9, 93, 31, 93, 75, 7, 4, 80, 19, 67, 49, 84,
        62, 100, 17, 40, 35, 84, 14, 81, 99, 31, 100, 66, 70, 2, 11, 84, 60, 89, 13, 57, 47, 60, 59,
        60, 42, 67, 89, 29, 85, 83, 42, 47, 66, 80, 88, 85, 83, 82, 16, 23, 21, 55, 26, 2, 21, 92,
        85, 26, 46, 3, 7, 95, 50, 22, 84, 52, 57, 44, 4, 23, 25, 55, 41, 49};
    int k = 37;

  /*  A = new int[]{8713, 7351, 8822, 7484, 3643, 4873, 7919, 2278, 7137, 4590, 1711, 5195, 9921, 6579, 8067, 6639, 2305, 5666, 9835, 7702, 1700, 5924, 6766, 1483, 3688, 9218, 1249, 2501, 2684, 6222, 4688, 5017, 7456, 4117, 6105, 8983, 8398, 7472, 1211, 4318, 2284, 5662, 8507, 4129, 5392, 6547, 3154, 1573, 9279, 1008, 5325, 2034, 1238, 4407, 6398, 8412, 6417, 8956, 1920, 2371, 6841, 1518, 9521, 1595, 4180, 2357, 5009, 2180, 4860, 9908, 3767, 8570, 1282, 1752, 3140, 6615, 3286, 4571, 2959, 7622, 1655, 3024, 8508, 3524, 5440, 9152, 8207, 4665, 6094, 7152, 2073, 3992, 8932, 9089, 2493, 2884, 2233, 8375, 4213, 1220, 4378, 8692, 9507, 6762, 5763, 6328, 9376, 8385, 9905, 1797, 1298, 6228, 1034, 1980, 2456, 5333, 8713, 5994, 8626, 5949, 9473, 2423, 6879, 4270, 1254, 6567, 7071, 4996, 3465, 7847, 8593, 5794, 7803, 9631, 9286, 5408, 6615, 1244, 7465, 5920, 3439, 1127, 3964, 4396, 3542, 8689, 8787, 9968, 3759, 6636, 5379, 8198, 4622, 3229, 3874, 2445, 8823, 8189, 2592, 8832, 1340, 3729, 8976, 4302, 1132, 7523, 4683, 2260, 9163, 2212, 8965, 9188, 6681, 5477, 2589, 2710, 1076, 3539, 5540, 6584, 5351, 2456, 3406, 1155, 5230, 4464, 2905, 4957, 1200, 1173, 7253, 7223, 3313, 2413, 9152, 6288, 7417, 4092, 6038, 1012, 6598, 9522, 7813, 2624, 8989, 9274, 4738, 1598, 4799, 4777, 9322, 4528, 4353, 1570, 5022, 2206, 7162, 2303, 6331, 5549, 4588, 1346, 1328, 1325, 1437, 2133, 1133, 5102, 5904, 1175, 5743, 1256, 9659, 6007, 5647, 7371, 7492, 1209, 3266, 9852, 7878, 4039, 6678, 6136, 4996, 5148, 2331, 2448, 1263, 2297, 8460, 3632, 9164, 3014, 5655, 1255, 8242, 1624, 5664, 5829, 6441, 5165, 7784, 8682, 6564, 2270, 3374, 1761, 5561, 5239, 1921, 1387, 4479, 3136, 4736, 8786, 1403, 3974, 7897, 5030, 6419, 2715, 6254, 6895, 4665, 3094, 9354, 1986, 4846, 2029, 6973, 1460, 9120, 6694, 5527, 2536, 6189, 3148, 3997, 6053, 4513, 6835, 7194, 9270, 2016, 8084, 3083, 9189, 1365, 4266, 6652, 2722, 5855, 7143, 3272, 9162, 9232, 9488, 7811, 6491, 8326, 2057, 6790, 5318, 2183, 7576, 6763, 4325, 2501, 3436, 8680, 7417, 6578, 7484, 4422, 5974, 8637, 7383, 3904, 9942, 7363, 1730, 9066, 2753, 2697, 3325, 6867, 6506, 1484, 6706, 6903, 6125, 6337, 4386, 8599, 4723, 7170, 4994, 6996, 4767, 4237, 3851, 6073, 4169, 2107, 9441, 8143, 1903, 4967, 6555, 6362, 1323, 8839, 2884, 7560, 8884, 5776, 7260, 9628, 6611, 7873, 4748, 2478, 8280, 1976, 6327, 4151, 6923, 9312, 4936, 9982, 9998, 3833, 2258, 8883, 7259, 4038, 2730, 6694, 2155, 8108, 1925, 3234, 8344, 3730, 3613, 7172, 5736, 8681, 1544, 9085, 4374, 3249, 9225, 7081, 3265, 6908, 1724, 7222, 6264, 7189, 1888, 5517, 9024, 2609, 5136, 2694, 8003, 3604, 8395, 8070, 1540, 2874, 1649, 6794, 5038, 4234, 5986, 4471, 8378, 7069, 1970, 2645, 4777, 2719, 2737, 6928, 5456, 9723, 3117, 8617, 7610, 1625, 5771, 3483, 6426, 2196, 5300, 5041, 2069, 9300, 6998, 7019, 8844, 1291, 4003, 4947, 2020, 8839, 1318, 4723, 6145, 9217, 9367, 2798, 2987, 2716, 9499, 2138, 6681, 9566, 3149, 5436, 7021, 4839, 8125, 7136, 3318, 7220, 6866, 9727, 6717, 7085, 4373, 8402, 1348, 5337, 4907, 9615, 1275, 3593, 9490, 5305, 7725, 3828, 8695, 9557, 2721, 5347, 9214, 4213, 3866, 6994, 1216, 5578, 1671, 6843, 4554, 6640, 7544, 3227, 7479, 5398, 8276, 3858, 9629, 7790, 7598, 7934, 7714, 8363, 7212, 1633, 3500, 8371, 7485, 2090, 6395, 3154, 9859, 8976, 6206, 8758, 1926, 6106, 5384, 7503, 2025, 7091, 1410, 1865, 1137, 8872, 9774, 5364, 1885, 1158, 6394, 1317, 3411, 5191, 8240, 8294, 3956, 3958, 7289, 8766, 8050, 9981, 6981, 1993, 1295, 1059, 1787, 6463, 9905, 9900, 9541, 9236, 1261, 3380, 6736, 9427, 9023, 4339, 8100, 7666, 6480, 7133, 7324, 6787, 8154, 1903, 9045, 1174, 6902, 7451, 6795, 2191, 9132, 2816, 9881, 5837, 4062, 7237, 4891, 5332, 3366, 8898, 8802, 1630, 9938, 1001, 5447, 8968, 7970, 6035, 4491, 2404, 1023, 5746, 2847, 6022, 3253, 1288, 8968, 2822, 8509, 6157, 7275, 4623, 7611, 1067, 8538, 4262, 5678, 7665, 8946, 1156, 6041, 8012, 8172, 8877, 2924, 6135, 8778, 8707, 8800, 8506, 8884, 8303, 6994, 9244, 2172, 6467, 5961, 5981, 3905, 4737, 7348, 3805, 2859, 1971, 8862, 4409, 9749, 5349, 1764, 8604, 6997, 4246, 2709, 1661, 6451, 5256, 3571, 3501, 6962, 5226, 5837, 9631, 5587, 3535, 2120, 4862, 4529, 6039, 1375, 3277, 7848, 8987, 3401, 1583, 2373, 9998, 4334, 9026, 1263, 3631, 9903, 8259, 9090, 5404, 7351, 5144, 9389, 5157, 8130, 8262, 5180, 8511, 9614, 2041, 3002, 2796, 7368, 2793, 8682, 5235, 2705, 6630, 4157, 2341, 4610, 6165, 3395, 1482, 5383, 9172, 2629, 4291, 4749, 9862, 7890, 7157, 7534, 7251, 9094, 2326, 2428, 3169, 7738, 6237, 9825, 2811, 4593, 1617, 5170, 5395, 6669, 3481, 5786, 9388, 7104, 4656, 8672, 3978, 4573, 6636, 7344, 9971, 1280, 4606, 8391, 1009, 9563, 3231, 1053, 6137, 1692, 1383, 7796, 3961, 4515, 2318, 3532, 4381, 9106, 3945, 3919, 5652, 6812, 6735, 8847, 3789, 8646, 2503, 5088, 9737, 2187, 8767, 9867, 6475, 7892, 4646, 2957, 7254, 3896, 5280, 7828, 2436, 7233, 6578, 3231, 1017, 4646, 3686, 7618, 8743, 4037, 6958, 5700, 5889, 4963, 1339, 7529, 2207, 8461, 2059, 6463, 9209, 6961, 4196, 3491, 9972, 5964, 2217, 7482, 3934, 8682, 8861, 3035, 3634, 1845, 3796, 2830, 2254, 9461, 9341, 1486, 9866, 6356, 6140, 3271, 2732, 3004, 2123, 1148, 6644, 1231, 3236, 1048, 3245, 9129, 1419, 3479, 4537, 2676, 8060, 4011, 1265, 8334, 6663, 5512, 3683, 5145, 7822, 9454, 6275, 5674, 1630, 7026, 5384, 6473, 2600, 6307, 1323, 2604, 3758, 1218, 7469, 2174, 3068, 6548, 9052, 8747, 4527, 4891, 4842, 9974, 9295, 9965, 5680, 2771, 3988, 6386, 9870, 7895, 3845, 6654, 4768, 5825, 2799, 8801, 1519, 4458, 3645, 6877, 4777, 1212, 6356, 6209, 2415, 2822, 1340, 9157, 9716, 3256, 7865, 2914, 8208, 9920, 7120, 8749, 1406, 4539, 9474, 7976, 8935, 9909, 8221, 6848, 5161, 9963, 7777, 2517, 2270, 3513, 7600, 1184, 5897, 8316, 7322, 5569, 8825, 1060, 8479, 3866, 4976, 4299, 1951, 6446, 2912, 3284, 2755, 8611, 6311, 2189, 1070, 1927, 7442, 6210, 5477, 2737, 1514, 5585, 9212, 9722, 9834, 5689, 8878, 4553, 8136, 9936, 4463, 3990, 6136, 6404, 1679, 1008, 1253, 2780, 8642, 8920, 5747, 6393, 3640, 4756, 3985, 6903, 2275, 3607, 2394, 2439, 4574};
    k = 110;
    int expected = 4461;
    System.out.println("total pairs: " + solve_3(A, k)+", expected: "+expected);

    A = new int[]{1, 2, 3, 4, 5};
    k = 2;
    expected = 4;
    System.out.println("total pairs: " + solve_3(A, k)+", expected: "+expected);

    A = new int[]{5227, 5591, 7559, 7295, 6601, 8018, 7494, 7065, 2734, 4622, 9509, 5980, 8169, 9935, 1695, 5601, 6002, 2459, 1865, 4132, 5184, 9299, 7692, 3640, 1325, 5321, 5172, 4303, 7442, 8568, 8884, 6955, 5526, 6978, 5817, 4089, 9293, 9128, 7466, 2160, 9970, 8618, 3245, 5421, 2528, 3939, 9225, 8783, 2347, 1146, 8651, 7187, 5866, 9409, 4703, 2730, 7465, 5582, 4471, 5394, 8423, 8273, 2171, 6521, 9551, 8444, 2251, 9357, 5788, 1546, 8086, 4851, 7826, 9313, 5690, 3613, 3604, 9791, 5988, 3371, 9359, 3959, 2937, 3571, 9745, 1261, 5030, 1740, 8432, 7702, 6459, 4079, 2507, 5715, 6572, 5339, 3952, 9913, 8035, 9411, 8427, 8898, 9532, 4208, 9642, 4823, 6702, 2380, 2589, 8021, 6448, 3082, 5014, 3046, 8728, 9567, 3587, 7742, 5423, 8607, 2394, 2461, 8895, 7857, 8488, 8443, 7413, 8080, 2491, 7400, 9707, 4797, 9435, 4844, 5535, 3340, 9264, 7255, 2289, 6460, 2786, 6233, 3345, 3613, 7092, 7961, 6091, 2813, 2885, 1843, 6278, 9449, 3507, 4976, 5668, 3799, 2873, 4179, 5677, 4068, 8988, 4696, 3142, 8614, 7156, 8299, 4127, 6748, 7565, 5445, 2137, 8886, 1399, 4371, 7016, 2051, 1253, 4464, 2262, 2757, 7208, 3016, 6516, 2047, 6552, 9558, 4456, 8061, 1827, 8225, 4440, 5823, 9525, 9298, 2772, 2080, 7538, 9892, 5646, 9925, 5210, 1958, 3396, 5621, 9589, 7253, 5946, 9544, 6372, 5581, 5985, 9349, 2817, 4746, 9703, 4571, 7833, 9834, 1638, 9634, 1330, 5102, 6557, 8846, 2906, 3586, 8054, 9362, 9873, 8676, 9982, 9208, 6673, 7332, 2707, 3442, 2763, 3332, 1594, 3208, 7106, 5906, 4108, 6985, 3526, 3395, 5428, 3556, 1310, 3120, 4442, 6362, 9606, 9459, 5604, 7663, 6360, 8257, 8185, 3636, 3773, 6093, 8082, 4886, 8503, 9563, 1491, 3072, 8130, 8737, 9451, 6303, 5738, 1160, 3427, 6707, 3811, 2287, 6934, 3128, 4001, 6034, 1360, 7197, 9795, 3214, 6064, 5117, 9488, 4005, 7083, 4422, 4416, 2185, 2698, 6548, 7844, 8855, 4476, 2569, 5492, 5530, 8351, 8638, 4245, 9994, 2781, 9650, 6168, 9048, 9986, 4488, 2615, 9364, 6802, 9706, 5876, 9963, 9765, 5903, 2475, 8454, 5596, 6144, 9023, 3055, 4393, 4682, 4194, 9612, 2478, 2951, 1298, 8245, 9039, 6240, 6633, 8045, 3397, 8735, 5728, 8184, 8002, 5631, 1448, 7188, 9003, 6832, 7840, 9619, 4572, 3359, 6543, 2331, 3979, 7955, 9596, 3578, 2784, 7539, 3430, 5678, 2441, 7088, 5938, 6655, 7984, 7271, 5512, 8243, 3484, 1615, 4113, 7930, 9427, 3330, 9524, 1243, 1180, 4904, 1113, 8318, 9324, 4510, 7651, 1906, 6608, 9811, 7906, 8366, 3050, 8221, 6072, 3836, 5711, 2831, 4292, 9796, 6440, 4189, 6929, 8366, 4081, 5878, 7550, 8329, 3359, 6362, 2982, 7542, 5945, 7894, 8229, 2567, 4016, 3354, 9450, 7669, 1953, 1787, 5726, 9977, 1680, 8047, 6794, 4547, 6572, 2398, 9526, 2244, 4759, 2168, 3444, 3845, 8146, 4483, 9228, 7570, 8430, 5984, 6728, 2241, 2950, 3924, 8749, 8646, 6251, 1404, 7493, 9257, 7800, 9656, 6315, 5378, 9475, 6144, 5199, 2942, 2028, 3008, 2141, 1641, 7961, 4759, 3463, 2823, 3905, 1464, 9912, 1577, 6921, 2662, 7315, 4758, 2807, 8028, 5440, 4247, 5915, 3477, 1680, 1638, 1714, 7699, 9157, 5660, 4795, 9312, 9832, 1068, 3836, 3763, 6278, 1465, 6536, 1803, 8811, 7454, 4446, 7876, 4799, 3845, 7150, 8048, 3093, 1142, 6239, 8160, 2695, 7390, 1124, 6735, 1972, 3546, 6767, 4788, 6942, 2993, 6068, 8112, 8442, 4382, 7785, 6781, 6249, 6056, 4519, 4604, 3567, 6465, 8563, 2984, 8634, 4525, 9090, 4205, 2597, 4693, 1485, 3450, 5207, 4556, 9408, 9973, 9336, 6153, 8498, 6700, 2806, 2844, 2534, 9231, 3509, 2489, 1231, 2584, 9354, 4892, 4798};
    k = 149;
    expected = 1034;
    System.out.println("total pairs: " + solve_1(A, k)+", expected: "+expected);*/

    A = new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 11, 9};
    k = 9;
    for (int i = 1; i <= 20; i++) {
      A = new int[i];
      for (int j = 1; j <= i; j++) {
        A[j - 1] = j;
      }
      k = i;
      System.out.println("Array: ");
      Util.printArray(A);
      System.out.println("k: " + k);
      System.out.println("total pairs(GFG): " + solve_1(A, k));
      System.out.println("total pairs(MySol): " + solve_3(A, k));
      System.out.println("--------------");
    }

   /* A = new int[]{1, 2, 3, 4, 5,6,7,8,9,10};
    k = 10;
    System.out.println("total pairs: " + solve_1(A, k));
    System.out.println("total pairs: " + solve_3(A, k));*/
  }

  public static int solve_1(int[] arr, int k) {
    int freq[] = new int[k];

    // Count occurrences of all remainders
    for (int i = 0; i < arr.length; i++) {
      ++freq[arr[i] % k];
    }

    // If both pairs are divisible by 'K'
    int sum = freq[0] * (freq[0] - 1) / 2;

    // count for all i and (k-i)
    // freq pairs
    for (int i = 1; i <= k / 2 && i != (k - i); i++) {
      sum += freq[i] * freq[k - i];
    }
    // If K is even
    if (k % 2 == 0) {
      sum += (freq[k / 2] * (freq[k / 2] - 1) / 2);
    }
    return sum;
  }

  public static int solve_3(int[] arr, int k) {
    int count = 0;
    final int modulo = 1000 * 1000 * 1000 + 7;
    // Mod of k will range from 0 to k-1, so size of freq array will be k
    // freq array will be of type long, int will give in-correct result
    long[] freqArr = new long[k];

    // Must check the base case, otherwise will fail in later condition
    if (arr.length <= 1) {
      return 0;
    }

    for (int num : arr) {
      num %= k;
      if (num < 0) {
        num += k;
      }
      freqArr[num]++;
    }

    // for mod as 0, or i=0
    count += freqArr[0] * (freqArr[0] - 1) / 2;

    // iterate from i=1 to k/2-1
    int i = 1;
    for (; i < k / 2; i++) {
      count += freqArr[i] * freqArr[k - i];
    }
    // At the end of the loop, i will be=k/2
    // If k is even no: only one element will be remaining in the middle
    // If k is odd no: two element will be remaining in the middle, k/2 and k/2+1
    if (k % 2 == 0) {
      count += (freqArr[i] * (freqArr[i] - 1)) / 2;
    } else {
      count += freqArr[i] * freqArr[k - i];
    }

    return count % modulo;
  }

}
